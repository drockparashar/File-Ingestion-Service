<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Basic HTML Server Request</title>
</head>
<body>
    <h1>Server Request Example</h1>
    <button id="fetchBtn">Fetch Data</button>
    <pre id="result"></pre>

    <form id="uploadForm" enctype="multipart/form-data">
        <input id="inputFile" type="file" name="file">
        <button type="button" id="uploadBtn">Upload</button>
    </form>
    <pre id="uploadResult"></pre>

    <script>
        const URI="http://localhost:5000"
        document.getElementById('fetchBtn').addEventListener('click', async () => {
            try {
                const response = await fetch(URI);
                const data = await response.json();
                document.getElementById('result').textContent = data.message;
            } catch (error) {
                document.getElementById('result').textContent = 'Error: ' + error;
            }
        });
        document.getElementById("uploadBtn").addEventListener('click',async()=>{
            const input=document.getElementById("inputFile");
            
            if (!input.files[0]) {
                document.getElementById("uploadResult").textContent = 'Please select a file first';
                return;
            }
            
            const formData= new FormData();
            formData.append("file",input.files[0]);
            
            document.getElementById("uploadResult").textContent = 'Uploading...';
            
            try{
                const response=await fetch(`${URI}/upload`,{
                    method:"POST",
                    body:formData
                })
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data=await response.json();
                document.getElementById("uploadResult").textContent = data.message;
            }catch(err){
                console.error('Upload error:', err);
                document.getElementById("uploadResult").textContent = 'Error: ' + err.message;
            }
        })
    </script>
</body>
</html>